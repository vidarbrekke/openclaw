# 2026-02-19 — Ops Consolidation

## What was done

Implemented all audit suggestions from the OpenClaw ops review:

### 1. Consolidated 4 timers into 1 orchestrator
- Replaced: `openclaw-ops-guard-status.timer`, `openclaw-cooldown-report.timer`,
  `openclaw-workspace-invariants.timer`, `openclaw-websearch-guard.timer`
- New: `openclaw-ops-maintenance.timer` (runs every 15 min)
- Script: `/root/.openclaw/scripts/ops-maintenance.py`
- Old units backed up to `/root/.openclaw/var/old-units/`

### 2. Incremental cooldown counters
- Uses journal cursor to only read new log entries (not full 24h rescan)
- Rolling 24h window with persisted state in `/root/.openclaw/var/ops-state/cooldown-counters.json`

### 3. Log rotation
- `skill-scanner.log` and `websearch-guard.log` auto-rotated at 5 MB

### 4. Sanitised Telegram alerts
- Internal paths (`/usr/lib/node_modules/openclaw/dist/...`, `/root/.openclaw/...`)
  replaced with generic placeholders in alert messages

### 5. Single combined report
- `memory/ops-combined-report.md` — one file for daily briefing
- Covers: service health, cooldown health, runtime guards, exec security, skill scanner

### 6. skill-scanner as OpenClaw skill
- Created `/root/.openclaw/skills/skill-scanner/SKILL.md`

### 7. Exec security posture documented
- Combined report now includes exec/elevated config warnings
- ops-guard skill documents that changes require human approval

### 8. Updated cron jobs
- `openclaw-update` cron now reads single combined report
- `healthcheck:security-audit` model fixed from `local` (broken) to `default`

### 9. Updated enforce-websearch-guard.py
- Now scans dist dir dynamically (glob) instead of hardcoded filenames
- Survives OpenClaw updates that change bundle hashes

### 10. Full transparency in AGENTS.md
- Added "Operational Infrastructure" section documenting the entire ops stack

## Current state
- 2 custom timers: `openclaw-ops-maintenance` (15 min) + `skill-scanner` (daily 3 AM)
- 3 cron jobs: openclaw-update, clawd-memory-backup, healthcheck:security-audit
- Cooldown health: **Degraded** (98 cooldown events in 24h — mostly OpenRouter limits)
